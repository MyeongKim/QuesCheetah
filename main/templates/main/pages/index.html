{% extends 'main/base.html' %}

{% load staticfiles %}

{% block stylesheet %}
    <style rel="stylesheet" >
        .info-div{
            text-align: center;
        }

        .info-div h1{
            text-align: center;
            margin-top: 100px;
            margin-bottom: 30px;
            font-weight: bold;
            font-size: 80px;

            -webkit-text-stroke: 1px black;
            color: #e4dd34;
            text-shadow:
            3px 3px 0 #000,
            -1px -1px 0 #000,
            1px -1px 0 #000,
            -1px 1px 0 #000,
            1px 1px 0 #000;
        }

        .download-div{
            text-align: center;
            margin-top: 50px;
        }

        .download-div a{
            margin: 30px;
        }
        
        .down-arrow{
            margin-top: 100px;
            margin-bottom: 100px;
            text-align: center;
            font-size: 2em;
        }
        .feature{
            text-align: center;
            margin-top : 50px;
        }

        .feature .feature-element {
            height: 200px;
            font-size: 1.3em;
            margin-top : 10px;
        }

        .feature .feature-element span{
            font-size: 2em;
        }

        .sample-div{
{#            background-color: #042927;#}
            background-color: #efefef;
        }

        .sample-div a{
            color: #757575;
        }

    </style>
{% endblock %}
{% block jumbotron %}
    <div class="my-jumbotron">
        <div class="container">
        <div class="main-info row">
        </div>
        </div>
        <div class="outer-circle"></div>
        <div class="inner-circle"></div>
    </div>
{% endblock %}
{% block content %}
    <div class="info-div">
        <h1>QuesCheetah</h1>
        <h4>Web SDK for the easy Q&A of your site.</h4>
    </div>
    <div class="download-div">
        <a href="https://raw.githubusercontent.com/mingkim/QuesCheetah/master/QuesCheetah/static/js/sdk.js" download><button class="btn btn-lg btn-default"><i class="fa fa-download"></i> Download SDK File</button></a>
        <a href="https://github.com/mingkim/QuesCheetah" target="_blank"><button class="btn btn-lg btn-default"><i class="fa fa-github"></i> Github repository</button></a>
    </div>
    <div class="down-arrow">
        <span class="glyphicon glyphicon-chevron-down" aria-hidden="true"></span>
    </div>
    <div class="feature">
        <div class="row">
            <div class="col-sm-6 feature-element">
                <span class="glyphicon glyphicon-wrench" aria-hidden="true"></span>
                <p>You can install QuesCheetah easily to your app.</p>
            </div>
            <div class="col-sm-6 feature-element">
                <span class="glyphicon glyphicon-stats" aria-hidden="true"></span>
                <p>Manage your results in our Dashboard.</p>
            </div>

            <div class="col-sm-6 feature-element">
                <span class="glyphicon glyphicon-picture" aria-hidden="true"></span>
                <p>Customize your Q&A freely.</p>
            </div>
            <div class="col-sm-6 feature-element">
                <span class="glyphicon glyphicon-retweet" aria-hidden="true"></span>
                <p>Real-time Q&A result will be provided.</p>
            </div>
            <div class="col-sm-12 sample-div">
                <a href="#"><h3>Check the sample project</h3></a>
            </div>
        </div>
    </div>
{% endblock %}
{% block modal %}
    {% include "main/pages/modal_login.html" %}
{% endblock %}
{% block script %}
    <script>
    $(document).ready(function(){
        function getCookie(name) {
            var cookieValue = null;
            if (document.cookie && document.cookie != '') {
                var cookies = document.cookie.split(';');
                for (var i = 0; i < cookies.length; i++) {
                    var cookie = jQuery.trim(cookies[i]);
                    // Does this cookie string begin with the name we want?
                    if (cookie.substring(0, name.length + 1) == (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }

        var csrftoken = getCookie('csrftoken');

        function csrfSafeMethod(method) {
            // these HTTP methods do not require CSRF protection
            return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
        }

        $.ajaxSetup({
            beforeSend: function(xhr, settings) {
                if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
                    xhr.setRequestHeader("X-CSRFToken", csrftoken);
                }
            }
        });

        function user_signup(email, username, password){
            $.ajax({
                url : "signup",
                type : "POST",
                data : {email : email ,username:username, password : password},
                success : function(json){

                    if(json.status){
                        $('#tab-helper-msg').html("<div class='alert-box alert radius' data-alert>"+json.msg+
                        "</div>");
                        $('#login-tab a').tab('show')
                        $('#signup-email').val('');
                        $('#signup-username').val('');
                        $('#signup-password').val('');
                        $('#signup-password2').val('');
                    } else {
                        $('#tab-helper-msg').html("<div class='alert-box alert radius' data-alert>"+json.msg+
                        "</div>");
                    }


                },
                error : function(xhr, errmsg, err){
                    $('#tab-helper-msg').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+errmsg+
                        "</div>");
                    console.log(xhr.status + ": " + xhr.responseText);
                    console.log('---------------');
                    console.log(xhr);
                    console.log('---------------');
                    console.log(err);
                }
            });
        }

        $('#signup-form').on('submit', function(e){
            e.preventDefault();
            var email = $('#signup-email').val();
            var username = $('#signup-username').val();
            var password = $('#signup-password').val();
            var password2 = $('#signup-password2').val();

            if (password === password2 ){
                user_signup(email, username, password);

            } else {
                $('#tab-helper-msg').html("<div class='alert-box alert radius' data-alert>비밀번호가 일치하지 않습니다.</div>");
                $('#signup-password').val('');
                $('#signup-password2').val('');
            }
        });

    });
    </script>
{% endblock %}